<!DOCTYPE html>
<html lang="it">
<meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scelta Maglia</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f7f7f7;
      color: #222;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    header {
      background: #1847a8;
      color: #fff;
      padding: 2rem 0 1rem 0;
    }
    main {
      margin: 2rem auto;
      max-width: 600px;
      background: #fff;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(24, 71, 168, 0.06);
    }
    footer {
      margin-top: 3rem;
      font-size: 0.9rem;
      color: #888;
    }
    a {
      color: #1847a8;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
    <div class="container">
        <h2>Modulo di Iscrizione e Selezione Numero</h2>
        <form id="registrationForm">
            <label for="firstName">Nome:</label>
            <input type="text" id="firstName" name="firstName" required>

            <label for="lastName">Cognome:</label>
            <input type="text" id="lastName" name="lastName" required>

            <label for="numberSelect">Seleziona un numero (1-99):</label>
            <select id="numberSelect" name="numberSelect" required>
                </select>

            <button type="submit">Invia</button>
            <div id="message"></div>
        </form>
    </div>

    <script>
         selectedNumbers = JSON.parse(localStorage.getItem('selectedNumbers')) || [];
         populateNumberSelect() {
             selectElement = document.getElementById('numberSelect');
            selectElement.innerHTML = '<option value="">Seleziona un numero</option>'; // Opzione predefinita

             ( i = 1; i <= 99; i++) {
                 (!selectedNumbers.includes(i)) {
                     option = document.createElement('option');
                    option.value = i;
                    option.textContent = i;
                    selectElement.appendChild(option);
                }
            }
        }
        document.getElementById('registrationForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Impedisce il ricaricamento della pagina

           firstName = document.getElementById('firstName').value.trim();
        lastName = document.getElementById('lastName').value.trim();
            selectedNumber = parseInt(document.getElementById('numberSelect').value);
        messageDiv = document.getElementById('message');
            messageDiv.style.display = 'none';
            messageDiv.className = '';
            messageDiv.textContent = '';

           (!firstName || !lastName || !selectedNumber) {
                messageDiv.textContent = 'Per favore, compila tutti i campi.';
                messageDiv.className = 'error';
                messageDiv.style.display = 'block';
                ;
            }

         (selectedNumbers.includes(selectedNumber)) {
                messageDiv.textContent = `Il numero ${selectedNumber} è già stato selezionato. Per favore, scegli un altro numero.`;
                messageDiv.className = 'error';
                messageDiv.style.display = 'block';
                ;
            }
            selectedNumbers.push(selectedNumber);
            localStorage.setItem('selectedNumbers', JSON.stringify(selectedNumbers)); // Salva in localStorage
            populateNumberSelect();
            messageDiv.textContent = `Registrazione di ${firstName} ${lastName} con il numero ${selectedNumber} avvenuta con successo!`;
            messageDiv.className = 'success';
            messageDiv.style.display = 'block';
            document.getElementById('registrationForm').reset();
            document.getElementById('numberSelect').value = ''; // Resetta la selezione del numero
        });
        document.addEventListener('DOMContentLoaded', populateNumberSelect);
    </script>
</body>
</html>
